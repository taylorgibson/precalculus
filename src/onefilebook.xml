<?xml version="1.0" encoding="UTF-8" ?>

<!--********************************************************************
Copyright 2015 Robert A. Beezer
This file is part of MathBook XML.
MathBook XML is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 2 or version 3 of the
License (at your option).
MathBook XML is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
You should have received a copy of the GNU General Public License
along with MathBook XML.  If not, see <http://www.gnu.org/licenses/>.
*********************************************************************-->

<!-- To process this file do                                                                      -->
<!--                                                                                              -->
<!-- (1) LaTeX/PDF:                                                                               -->
<!--     xsltproc mathbook/xsl/mathbook-latex.xsl onefilebook.xml                                 -->
<!--     pdflatex onefilebook.tex                                                                 -->
<!--     xelatex onefilebook.tex                                                                  -->
<!--                                                                                              -->
<!-- (2) HTML:                                                                                    -->
<!--     xsltproc mathbook/xsl/mathbook-html.xsl onefilebook.xml                                  -->
<!--     <browswer>  onefilebook.html                                                             -->
<!--                                                                                              -->
<!-- (3) SageMathCloud worksheet (parameter causes a single file for output)                      -->
<!--     REMOVE the "X" in the double dash (which is not legal in an XML comment)                 -->
<!--     xsltproc -X-stringparam chunk.level 0 mathbook/xsl/mathbook-smc.xsl onefilebook.xml      -->
<!--     <SageMathCloud> onefilebook.sagews                                                       -->
<!--                                                                                              -->
<!-- (4) Sage doctesting                                                                          -->
<!--     REMOVE the "X" in the double dash (which is not legal in an XML comment)                 -->
<!--     xsltproc -X-stringparam chunk.level 0 mathbook/xsl/mathbook-sage-doctest.xsl onefilebook.xml -->
<!--     <read further instructions in> onefilebook.py                                            -->

 <mathbook xmlns:xi="http://www.w3.org/2001/XInclude" xml:lang="en-US">

   <!-- bookinfo.xml -->
   <!-- ISBN, website, other metadata -->
   <docinfo>

        <brandlogo url="http://cpta.ncssm.edu" source="images/cover_cpta_2018.jpg" />

        <!-- Prefix to enhance Sage notebook contents -->
        <initialism>CPTA</initialism>

        <!-- tikz package and libraries for images -->
        <latex-image-preamble>
          \usepackage{tikz}
          \usepackage{pgfplots}
          \usepackage{pgfplotstable}
          \pgfplotsset{axis lines = middle,
             x label style={at={(axis description cs:0.5,-0.1)}, anchor=north},
             y label style={at={(axis description cs:-0.1,.5)},rotate=90,anchor=south},
             }
          \usetikzlibrary{backgrounds}
          \usetikzlibrary{arrows,matrix}
          \usetikzlibrary{snakes}
        </latex-image-preamble>

        <!--
        <search>
            <google>
                <cx>replace:replace</cx>
            </google>
        </search>

        <analytics>
            <statcounter>
                <project>replace</project>
                <security>replace</security>
            </statcounter>
        </analytics>
        -->

    </docinfo>
   <!-- / bookinfo.xml -->


    <book xml:id="cpta">
        <title>Contemporary Pre-Calculus Through Applications</title>
         <!-- frontmatter.xml -->
          <frontmatter>
              <titlepage>

                  <author>
                      <personname>Mathematics Department</personname>
                      <institution>North Carolina School of Science and Mathematics</institution>
                  </author>

                  <date>
                      <today />
                  </date>

            </titlepage>
          </frontmatter>
         <!-- /frontmatter.xml -->

         <chapter xml:id="chapter01" xmlns:xi="http://www.w3.org/2001/XInclude">
       		<title>Data</title>
       		<introduction>
        			<p>Introduction to this chapter</p>
       		</introduction>

       		<section xml:id="chapter01-section01">

       		</section>
       	</chapter>

        <chapter xml:id="chapter02" xmlns:xi="http://www.w3.org/2001/XInclude">
      		<title>Transformations of Functions</title>
      		<introduction>
       			<p>Introduction to this chapter</p>
      		</introduction>

      		<section xml:id="chapter02-section01">

      		</section>
      	</chapter>

        <chapter xml:id="chapter03" xmlns:xi="http://www.w3.org/2001/XInclude">
      		<title>Combining Functions</title>
      		<introduction>
       			<p>Introduction to this chapter</p>
      		</introduction>

      		<section xml:id="chapter03-section01">

      		</section>
      	</chapter>

        <!-- chapter04.xml -->
        <chapter xml:id="chapter04" xmlns:xi="http://www.w3.org/2001/XInclude">
          <title>Exponential Functions</title>

        <!-- chapter04-section01.xml -->
          <section xml:id="chapter04-section01">
			    <title>Recursive Functions</title>

	         <p>In a previous chapter we learned that a function is a special sets of ordered pairs.  In most of the examples in the preceeding chapters, functions were described by an algebraic expression that could be evaluated for a particular input value resulting in a unique output value. Such algebraic expressions are called closed form or explicit expressions.  For these functions, the relationship <m>y=f(x)</m> is used to show how the <m>y</m>-value is related to the given <m>x</m>-value. For example, the function <m>f(x)=x^2+6x</m> is an explicit function. This notation tells us that any particular numerical value for <m>x</m> is paired with the <m>y</m>-value equal to <m>x^2+6x</m>. So 1 is paired with 7, since <m>f(1)=(1)^2+6(1)=7</m> , and <m>-3</m> is paired with <m>-9</m>, since <m>f(-3)=(-3)^2+6(-3)=-9</m>.</p>

           <p>In this section we will investigate functions that are defined recursively. The domain values for these functions are positive whole numbers, and each range value is defined in terms of the preceding range value, rather than in terms of an <m>x</m>-value.</p>

    			 <example>
    			      <title>Ibuprofen in the blood stream</title>
    			      <p>Joan has a headache and decides to take a 200mg ibuprofen tablet for pain relief.  The drug is absorbed into her system and stays in her system until the drug is metabolized and filtered out by the liver and kidneys.  Ibuprofen is rapidly metabolized.  Every four hours, Joan's body removes <m>67\%</m> of the ibuprofen that was in her body at the beginning of that four-hour time period.  How much of the ibuprofen will remain in her system <m>24</m> hours after taking the <m>200</m>mg tablet?</p>
    				    <solution>
                  <p>One way to generate values for the amount of ibuprofen in Joan's system is to use an iterative process.  In any iterative process the current value of a variable is used to determine the next value.  In this example, we generate a new amount of ibuprofen by subtracting the amount of ibuprofen filtered out of Joan's system from the amount that was previously there.  Since Joan begins with 200mg of ibuprofen, we write
                  <md>
    						    <mrow>D_0=0</mrow>
    						  </md>
                  where <m>D_0</m> is used to represent the amount of ibuprofen present at the start of the process</p>
                  <p>We will use <m>D_1</m> to represent the amount of ibuprofen left after four hours.  The subscripts are used to count the steps, or iterations,  in the iterative process. In this problem the subscript  represents the number of four-hour time periods since Joan took the tablet.  In four hours, her kidneys have filtered out <m>67\%</m> of the drug from her bloodstream, so we write
                  <md>
                    <mrow>D_1=D_0-.67D_0=200-.67\cdot 200=66</mrow>
                  </md></p>
                  <p>The amount of drug in her body after a second four-hour time period is represented by <m>D_2</m>.
                  <md>
                    <mrow>D_2=D_1-0.67D_1=66-.067\cdot 66=21.78</mrow>
                  </md></p>
                  <p>Similarly, we know that successive values of the amount of drug in her body can be generated by
                  <md>
                    <mrow>D_3=D_2-0.67D_2=7.187</mrow>
                    <mrow>D_4=D_3-0.67D_3=2.372</mrow>
                  </md>
                  and, in general,
                  <md>
                    <mrow>D_n=D_{n-1}-0.67D_{n-1},n=1,2,3...</mrow>
                  </md></p>
                  <p>Using a spreadsheet or calculator, we can generate successive values of <m>D_n</m> as shown in <xref ref="figure-plot-ibuprofen-one-dose" />.  Note that values in the table are rounded to three decimal places but that exact values were used in all computations. The amount of drug in Joan's body drops to less than <m>1</m> mg between the fourth and fifth time periods.  If she takes a single <m>200</m> mg dose, Joan will have only about <m>0.258</m> mg remaining in her body <m>24</m> hours later.</p>
                  <sidebyside widths ="25% 65%">
                  <figure xml:id="figure-table-ibuprofen-one-dose">
                    <image xml:id="table-ibuprofen-one-dose">
                      <latex-image-code>
                        <![CDATA[
                        \pgfplotstabletypeset[
                            	col sep=comma,
                              column type=l,
                              every head row/.style={after row=\hline},
                              every column/.style={column type/.add={|}{|}},
                              every first column/.style={column type/.add={}{|}},
                              columns/0/.style={string type, column name={$n$}},
                            	columns/1/.style={string type, column name={$D_n$}},
                            ]{data-single-dose-ibuprofen.csv}
                        ]]>
                      </latex-image-code>
                    </image>
                  </figure>

                  <figure xml:id="figure-plot-ibuprofen-one-dose">
                      <caption>Amount of drug in Joan's body (Single 200 mg dose)</caption>
                      <image xml:id="plot-ibuprofen-one-dose">
                          <description>Amount of drug in Joan's body (Single 200 mg dose)</description>
                          <latex-image-code>
                          <!-- CDATA prevents certain LaTeX code from being interpreted as xml -->
                          <![CDATA[
                              \begin{tikzpicture}
                              \begin{axis}[
                                 axis line style = {<->},
                                 width = 0.5\linewidth,
                                 xlabel = Number of 4 hour intervals,
                                 ylabel = Amount of Ibuprofen (mg),
                                 xmin = -1, xmax= 7,
                                 ymin = -25, ymax=250,
                                 ytick = {0,100,200},
                                 xtick = {0, 1, ...,6},
                              ]

                                \addplot table [only marks, x index = {0}, y index = {1}, col sep=comma]{data-single-dose-ibuprofen.csv};

                              \end{axis}
                          \end{tikzpicture}]]>
                          </latex-image-code>
                      </image>
                  </figure>
                 </sidebyside>
                 <p>The graph in <xref ref="figure-plot-ibuprofen-one-dose" /> shows the ordered pairs <m>(n,D_n)</m> generated by the recursive system</p>
                 <md>
                   <mrow>D_0=200</mrow>
                   <mrow>D_n=D_{n-1} - 0.67D_{n-1}, n=1,2,3,...</mrow>
                 </md>
                 <p>Each point on the graph shows the amount of ibuprofen in Joan’s body at the end of a four-hour time period. Notice that there is obvious curvature in this graph.  The amount of drug in Joan’s body does not decrease by the same number of milligrams during each time interval.</p>
    				    </solution>
    			 </example>
           <p>You should complete Practice Problems 1 and 2 now.</p>
<!-- This is class exercises, but the formatting is a bit weird right now. -->
<!--
        <exercises>
           <exercise>
             <statement>
               <p>In each recursive system, the domain of <m>D_n</m> is <m>n=1,2,3, ...</m> and <m>D_n</m> represents the amount of ibuprofen in Joan's system after n four-hour time periods.  For each system, find how much drug remains after 24 hours, and identify the rate at which Joan’s system filters out the drug.
                 <ol>
                   <li><m>D_0=300, D_n=D_{n-1} - 0.8D_{n-1}</m></li>
                   <li><m>D_0=150, D_n=D_{n-1} - 0.2D_{n-1}</m></li>
                   <li><m>D_0=500, D_n=0.2D_{n-1}</m></li>
                   <li><m>D_0=500, D_n=0.5D_{n-1}</m></li>
                 </ol>
                 </p>
             </statement>
          </exercise>
        </exercises>
-->
           <example>
    			      <title>Repated dose of ibuprofen</title>
    			      <p>ibuprofen Joan strained her knee playing tennis and her doctor has prescribed ibuprofen to reduce the inflammation and control pain.  Joan is instructed to take two 200-milligram ibuprofen tablets every 4 hours for three days.  Joan doesn’t like taking medicine, so she decides to take only one tablet every four hours for six days.  After the six days, Joan’s knee has not responded to the medication.  Naturally, she knew that the knee would take longer to respond to the reduced treatment, but she did not expect no response at all.  What could have happened?</p>
                <solution>
                  <p>In this situation, Joan did not take just a single 200 mg tablet.  Every four hours she took another 200 mg tablet, and we can modify our recursive system to model this behavior. At the end of the nth four-hour period, Joan’s body has filtered <m>67\%</m> of the drug that was in her body after n-1st  four-hour period.  In addition, 200 mg from the new tablet have been added into her body.  The recursive system representing the amount of ibuprofen in Joan’s body if she takes one tablet every four hours is</p>
                  <md>
                    <mrow>D_0=200</mrow>
                    <mrow>D_n=D_{n-1} - 0.67D_{n-1} + 200, n=1,2,3,...</mrow>
                  </md>
                  <p>The subscript n represents the number of four-hour time periods that have elapsed since Joan took the first dose.  By iterating the recursive system we can generate values of <m>D_n</m> that represent the amounts of drug in Joan’s body at the end of each four-hour period, assuming  <m>67\%</m> of the drug is filtered in a four-hour period.  These values, rounded to two decimal places, are shown together with a graph in <xref ref="figure-plot-ibuprofen-multi-dose" /></p>
                  <sidebyside widths ="25% 65%">
                  <figure xml:id="figure-table-ibuprofen-multi-dose">
                    <image xml:id="table-ibuprofen-multi-dose">
                      <latex-image-code>
                        <![CDATA[
                        \pgfplotstabletypeset[
                            	col sep=comma,
                              column type=l,
                              every head row/.style={after row=\hline},
                              every column/.style={column type/.add={|}{|}},
                              every first column/.style={column type/.add={}{|}},
                              columns/0/.style={string type, column name={$n$}},
                            	columns/1/.style={string type, column name={$D_n$}},
                            ]{data-multi-dose-ibuprofen.csv}
                        ]]>
                      </latex-image-code>
                    </image>
                  </figure>

                  <figure xml:id="figure-plot-ibuprofen-multi-dose">
                      <caption>Amount of drug in Joan's body (Single 200 mg dose)</caption>
                      <image xml:id="plot-ibuprofen-multi-dose">
                          <description>Amount of drug in Joan's body (Single 200 mg dose)</description>
                          <latex-image-code>
                          <!-- CDATA prevents certain LaTeX code from being interpreted as xml -->
                          <![CDATA[
                              \begin{tikzpicture}
                              \begin{axis}[
                                 axis line style = {<->},
                                 width = 0.5\linewidth,
                                 xlabel = Number of 4 hour intervals,
                                 ylabel = Amount of Ibuprofen (mg),
                                 xmin = -1, xmax= 11,
                                 ymin = -25, ymax=300,
                                 ytick = {0,100,200,300},
                                 xtick = {0, 1, ...,10},
                              ]

                                \addplot table [only marks, x index = {0}, y index = {1}, col sep=comma]{data-multi-dose-ibuprofen.csv};

                              \end{axis}
                          \end{tikzpicture}]]>
                          </latex-image-code>
                      </image>
                  </figure>
                 </sidebyside>
                 <p>The points shown in <xref ref="figure-plot-ibuprofen-multi-dose" /> represent the amount of the drug in Joan’s body immediately after she takes a tablet.  Between consecutrive doses, we know that the level of the drug declines.  We assume that the level “jumps up” at the moment she takes another tablet, and the recursive system enables us to compute these values.   If we  record the drug levels only after she takes a tablet, then we see that these values reach an equilibrium of approximately 298.51 mg.  To see why this equilibrium has been reached, consider how much of the 298.51 mg of the drug will be filtered in four hours.  Joan’s kidneys will filter out <m>67\%</m> of the 298.51 mg in her body, or approximately 200 mg, which will be replaced when she takes the next tablet. Equilibrium occurs because the amount of drug taken into the body is the same as the amount filtered prior to taking the next tablet.</p>

                 <p>Suppose the drug Joan is taking has a therapeutic level of 450 mg.  This means that there must be at least 450 milligrams of the drug in her body for Joan to receive the benefits of the drug.  No wonder she thought the drug was not working.  It wasn’t!</p>
               </solution>
             </example>

             <exercises>
               <exercise>
                 <statement>
                   <p>Modify the recursive  system  used in Example 1 as appropriate to answer the following questions:
                     <ol>
                       <li>Suppose Joan takes tables that contain 250 milligrams of ibuprofen..  How much ibuprofen would be in her body after 4, 8, 12, 16, 20, and 24 hours? </li>
                       <li>Suppose Joan’s kidneys filter only <m>50\%</m> of the drug in a four hour time period.  If Joan takes a 200 mg tablet every 4 hours, how much ibuprofen would she  have in her system after  4, 8, 12, 16, 20 and 24 hours?</li>
                     </ol>
                     </p>
                 </statement>
              </exercise>

              <exercise>
                <statement>
                  <p>If Joan takes her medication every 4 hours, determine the amount of drug in Joan’s body after 2 days (twelve  4-hour time periods) and the equilibrium level resulting from each of the following recursive systems.  Plot the ordered pairs you generate on a graph.  Note that in some cases the initial dosage and subsequent doses are not the same size.  In each exercise, the domain of <m>D_n</m> is <m>n=1,2,3, ...</m>
                    <ol>
                      <li><m>D_0=200, D_n=D_{n-1} - 0.4D_{n-1} + 200</m></li>
                      <li><m>D_0=800, D_n=0.6D_{n-1} + 200</m></li>
                      <li><m>D_0=600, D_n=0.4D_{n-1} + 200</m></li>
                      <li><m>D_0=600, D_n=D_{n-1} - 0.4D_{n-1} + 200</m></li>
                      <li><m>D_0=600, D_n=0.6D_{n-1} + 300</m></li>
                      <li><m>D_0=600, D_n=0.4D_{n-1} + 300</m></li>
                    </ol>
                    </p>
                </statement>
             </exercise>

             <exercise>
               <statement>
                 <p>Each of the systems in exercise 2 can be written in the form
                    <md>
                      <mrow>D_0=a</mrow>
                      <mrow>D_n=(1-r) D_{n-1}+b, n=1,2,3...</mrow>
                    </md>

                   <ol>
                     <li>What does <m>r</m> represent in the context of Joan's medication?  Why is <m>r</m> between 0 and 1?</li>
                     <li>By looking back at the results of exercise 2 and by trying other variations, determine the effect of changing <m>a</m>, <m>r</m>, and <m>b</m> on the amount of drug in Joan's body after 5 days</li>
                     <li>Determine the equilibrium level in terms of <m>a</m>, <m>r</m>, and <m>b</m>.  You can recognize that equilibrium has been reached if  <m>D_n=D_{n-1}</m>.</li>
                     <li>Use the result of part c to determine the equilibrium level of a drug if you take 200 mg every 4 hours and your kidneys filter out <m>50\%</m> of the drug in your body every 4 hours</li>
                   </ol>
                   </p>
               </statement>
            </exercise>

            <exercise>
              <statement>
                <p>A company has <m>\$10,000</m> worth of equipment and for tax purposes they want to figure the depreciation of the equipment over a 10-year time period.  One method is to reduce the value each year by the same dollar amount.  A second method is to decrease the value of the equipment each year by the same percent of the current value each year.
                  <ol>
                    <li>Using the first method, generate a table and graph for the value of the equipment if it is  decreased each year by <m>\$2000</m>.</li>
                    <li>Using the second method, generate a table and graph for the value of the equipment if it is decreased by <m>20\%</m> each year.</li>
                  </ol>
                  </p>
              </statement>
           </exercise>

           <exercise>
             <statement>
               <p>One of the primary responsibilities of the manager of a swimming pool is to maintain the proper concentration of chlorine in the swimming pool.  The concentration should be between 1 and 2 parts per million (ppm).  If the concentration gets as high as 3 ppm swimmers experience burning eyes.  If the concentration gets below 1 ppm, the water will become cloudy, which is unappealing.  If it drops below 0.5 ppm, algae begin to grow.  During a period of one day, <m>15\%</m> of the chlorine present in the pool dissipates (mainly due to the sun).
                 <ol>
                   <li>If the chlorine content starts at 2.5 ppm and no additional chlorine is added, how long will it be before the water becomes cloudy?</li>
                   <li>If the chlorine content starts at 2.5 ppm and the equivalent of 0.5 ppm of chlorine is added daily, what will happen to the level of chlorine in the pool in the long run?</li>
                   <li>If the chlorine content starts at 2.5 ppm and the equivalent of 0.1 ppm of chlorine is added daily, what will happen to the level of chlorine in the pool in the long run?</li>
                   <li>How much chlorine must be added daily for the chlorine level to stabilize at 1.8 ppm?</li>
                 </ol>
                 </p>
             </statement>
          </exercise>

          <exercise>
            <statement>
              <p>The Fish and Wildlife Division monitors the trout population in a stream that is under their jurisdiction.  Their research indicates that natural predators, together with pollution and fishing, are causing the trout population to decrease at a rate of <m>20\%</m> per month.  They propose to introduce additional trout into the stream each month.  Assume the current population is 300.  Use tables and graphs to investigate the following:
                <ol>
                  <li>What will happen to the trout population over the next ten months with no replenishment program?</li>
                  <li>What is the long-term result of introducing 100 trout into the stream each month?</li>
                  <li>Investigate the result of changing the number of trout introduced each month.  What is the impact on the long-term population of the number of trout added each month?</li>
                  <li>Investigate the impact on the long-term behavior of the population of changing the initial population.  What is the effect of the initial population?</li>
                  <li>What is the impact of the rate of decrease in the population during the replenishment program?</li>
                  <li>There are three parameters in this problem: the initial number of trout, the rate of decrease, and the number of trout added each month. Which parameter seems to have the most influenceon the long-term behavior? Explain briefly.</li>
                </ol>
                </p>
            </statement>
         </exercise>

         <exercise>
           <statement>
             <p>Drugs generally have a therapeutic range rather than a single therapeutic level.  In other words, a drug is effective if the level in the body is between two values.  At concentrations below this range, too little of the drug is present to have a measurable effect, and concentrations above this range may be toxic.  The level of drug in the body peaks just after the drug is taken, while the drug level is at a minimum just before the dosage is taken.  Suppose Joan takes an anti-inflammatory drug at the prescribed dosage of 440 mg every 12 hours and her kidneys filter <m>60\%</m> of the drug from her body every 12 hours.  Use tables and graphs to investigate the following:
               <ol>
                 <li>Generate a sequence of values for the level of drug in Joan’s body just before each dose.</li>
                 <li>In the long-run, the level of drug in Joan’s body will range  between what two values?</li>
                 <li>Suppose the therapeutic range of the anti-inflammatory drug is between 300 mg and 800 mg.  What adjustment, if any, needs to be made in Joan’s dosage to stay within this range in the long run?</li>
               </ol>
               </p>
           </statement>
        </exercise>

        <exercise>
          <statement>
            <p>Suppose Morgan  wants to buy a television that costs <m>\$549</m>.  He has a part-time job, and he is able to save <m>\$85.00</m> each week.  Suppose he accumulates the money at home.
              <ol>
                <li>Write a recursive system that can be used to determine how much Morgan has saved over time.</li>
                <li>Use the recursive system to generate values for the amount of money Morgan has saved in thirteen weeks.</li>
                <li>Make a graph to show the amount Morgan has saved versus the number of weeks he has been saving.</li>
                <li>The points graphed in part (c) should appear linear.  Explain why the situation implies that these ordered pairs are linear.</li>
                <li>Write an explicit function of the form <m>A=f(t)</m> that could be used to generate the same ordered pairs you graphed in part (c).</li>
                <li>State the domain and the range of the explicit function within the context of this problem.  Compare them to the domain and range of the recursively defined function.</li>
              </ol>
              </p>
          </statement>
       </exercise>

       <exercise>
         <statement>
           <p>Now suppose that Morgan deposits his savings in a bank that will pay <m>0.02\%</m> interest each week.
             <ol>
               <li>Write a recursive system that can be used to determine how much Morgan has saved over time.</li>
               <li>Use the recursive system to generate values for the amount of money Morgan has in the bank after 13 weeks of saving.</li>
               <li>Make a graph to show the amount Morgan has saved versus the number of weeks he has been saving.</li>
               <li>Are the ordered pairs graphed in part (c) linear?  Explain why or why not.</li>
               <li>State the domain and range of the recursively defined function.</li>
             </ol>
             </p>
         </statement>
      </exercise>

     </exercises>
		 </section>
          <!-- /chapter04-section01.xml -->

     <section xml:id="chapter04-section02">
     <title>Using Recursion to Understand Loans and Investments</title>

      <p>Recursive systems are useful for finding solutions to various types of problems.</p>
      <p>Suppose you are interested in purchasing a car and need a <m>\$10,000</m> loan. The lending agency is going to charge you interest each month and you are going to make a payment each month. You plan to pay <m>\$230</m> each month until the loan is paid off. Suppose the interest rate is <m>0.45\%</m> per month (approximately <m>5.4\%</m> per year). How long will it take you to repay the loan? What is the total amount you will have to repay?  You can answer these questions using recursion.</p>
      <p>When making monthly payments to repay a loan, an interest payment is charged on all of the money that is owed at the end of each month.  In this example, at the end of the first month you will owe <m>(0.0045)(10,000)=\$45.00</m> in interest. After making the first payment you will owe <m>\$10,000+\$45-\$230=\$9815</m>. The amount you still owe on the loan at the end of a month is equal to the amount you owed previously plus the interest minus the amount of your payment. This is expressed in a recursive system as: </p>
      <md>
        <mrow>L_0=10,000, L_{n-1}+(0.0045)\cdot L_{n-1}-230, where n=1,2,3,...</mrow>
      </md>
      <p>where <m>L_n</m> is the amount you owe on the loan after <m>n</m> months.  This amount is also known as the <em>principal</em>, or the <em>outstanding balance</em>. If we iterate this system, the values we generate represent the outstanding balance at the end of each month.</p>
      <md>
        <mrow>L_1=L_0+(0.0045)\cdot L_0-230=10,000+(0.0045)\cdot 10,000-230=9,815</mrow>
        <mrow>L_2=L_1+(0.0045)\cdot L_1-230=9,815+(0.0045)\cdot 9,815-230=9,629.17</mrow>
        <mrow>L_3=L_2+(0.0045)\cdot L_2-230=9,629.17+(0.0045)\cdot 9,629.17-230=9,442.50</mrow>
      </md>
      <p>Note that values have been rounded to the nearest cent.  All the decimal places on the calculator were retained in the computations.</p>
      <p>After three months, you will owe <m>\$9,442.50</m> on the loan. Notice that you have paid a total of <m>\$230\cdot 3=\$690</m>, but only <m>\$10,000-\$9442.50=\$557.50</m> was applied towards decreasing the principal of the loan. The remaining <m>\$132.50</m> was payment of interest.</p>
      <p>We can continue generating values of <m>L_n</m> using a more compact form of the iterative equation,</p>
      <md>
        <mrow>L_n=(1.0045)\cdot L_{n-1}-230</mrow>
      </md>
      <p>which yields</p>
      <md>
        <mrow>L_4=(1.0045)\cdot L_3-230=\$9,254.99</mrow>
        <mrow>L_5=(1.0045)\cdot L_4-230=\$9,066.64</mrow>
        <mrow>L_6=(1.0045)\cdot L_5-230=\$8,877.44</mrow>
      </md>
      <p>After six months, you owe <m>\$8,877.44</m> of the original <m>\$10,000</m> principal.  You have paid <m>\$1,380</m> in interest, and this payment has reduced the outstanding balance by <m>\$1,122.56</m>.  Over <m>\$250</m> was interest on the loan.</p>
      <p>If we continue the payments of <m>\$230</m> for four years (48 months), the final payment will probably not bring the outstanding balance to exactly zero dollars.  Although it is possible to calculate a loan payment that will exactly pay off the loan in 48 equal payments, it is common practice for the lender to make all of the payments, except for the last one, a whole dollar amount, or even round these payments to the nearest five or ten-dollar amounts. Doing this will almost certainly make the final payment different from the rest.  This final payment is known as the balloon payment</p>
      <p>The graph and partial table in Figure XX show that it will take <m>47</m> payments to get the balance down to <m>\$341.20</m>.  After one additional month the balance will be <m>\$341.20\cdot 1.0045=\$342.74</m> if we round in the usual manner.  Thus, the balloon payment would be <m>\$342.74</m>.</p>
   </section>


  </chapter>
        <!-- /chapter04.xml -->


	<chapter xml:id="chapter05" xmlns:xi="http://www.w3.org/2001/XInclude">
		<title>Logarithmic Functions</title>
		<introduction>
 			<p>Introduction to this chapter</p>
		</introduction>

		<section xml:id="chapter05-section01">

		</section>
	</chapter>

  <chapter xml:id="chapter06" xmlns:xi="http://www.w3.org/2001/XInclude">
    <title>Parametric Functions</title>
    <introduction>
      <p>Introduction to this chapter</p>
    </introduction>

    <section xml:id="chapter06-section01">

    </section>
  </chapter>

  <chapter xml:id="chapter07" xmlns:xi="http://www.w3.org/2001/XInclude">
    <title>Intro to Trigonometric Functions</title>
    <introduction>
      <p>Introduction to this chapter</p>
    </introduction>

    <section xml:id="chapter07-section01">

    </section>
  </chapter>

  <chapter xml:id="chapter08" xmlns:xi="http://www.w3.org/2001/XInclude">
		<title>More Trigonometric Functions</title>
		<introduction>
 			<p>Introduction to this chapter</p>
		</introduction>

		<section xml:id="chapter08-section01">

		</section>
	</chapter>

  <chapter xml:id="chapter09" xmlns:xi="http://www.w3.org/2001/XInclude">
    <title>Combinations of Functions</title>
    <introduction>
      <p>Introduction to this chapter</p>
    </introduction>

    <section xml:id="chapter09-section01">

    </section>
  </chapter>


  <chapter xml:id="chapter10" xmlns:xi="http://www.w3.org/2001/XInclude">
    <title>Matrices</title>
    <introduction>
      <p>Introduction to this chapter</p>
    </introduction>

    <section xml:id="chapter10-section01">

    </section>
 </chapter>

 </book>

</mathbook>
